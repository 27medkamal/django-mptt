<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>mptt.models &mdash; django-mptt 0.8.1 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.8.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="django-mptt 0.8.1 documentation" href="index.html" />
    <link rel="up" title="mptt" href="mptt.html" />
    <link rel="next" title="mptt.querysets" href="mptt.querysets.html" />
    <link rel="prev" title="mptt.managers" href="mptt.managers.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mptt.querysets.html" title="mptt.querysets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mptt.managers.html" title="mptt.managers"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">django-mptt 0.8.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="autogenerated.html" >Autogenerated documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="mptt.html" accesskey="U"><code class="docutils literal"><span class="pre">mptt</span></code></a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-mptt.models">
<span id="mptt-models"></span><h1><code class="docutils literal"><span class="pre">mptt.models</span></code><a class="headerlink" href="#module-mptt.models" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="mptt.models.TreeForeignKey">
<em class="property">class </em><code class="descclassname">mptt.models.</code><code class="descname">TreeForeignKey</code><span class="sig-paren">(</span><em>to</em>, <em>to_field=None</em>, <em>rel_class=&lt;class 'django.db.models.fields.related.ManyToOneRel'&gt;</em>, <em>db_constraint=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeForeignKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends the foreign key, but uses mptt&#8217;s <code class="docutils literal"><span class="pre">TreeNodeChoiceField</span></code> as
the default form field.</p>
<p>This is useful if you are creating models that need automatically
generated ModelForms to use the correct widgets.</p>
<dl class="method">
<dt id="mptt.models.TreeForeignKey.formfield">
<code class="descname">formfield</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeForeignKey.formfield" title="Permalink to this definition">¶</a></dt>
<dd><p>Use MPTT&#8217;s <code class="docutils literal"><span class="pre">TreeNodeChoiceField</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mptt.models.TreeOneToOneField">
<em class="property">class </em><code class="descclassname">mptt.models.</code><code class="descname">TreeOneToOneField</code><span class="sig-paren">(</span><em>to</em>, <em>to_field=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeOneToOneField" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="mptt.models.TreeOneToOneField.formfield">
<code class="descname">formfield</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeOneToOneField.formfield" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mptt.models.TreeManyToManyField">
<em class="property">class </em><code class="descclassname">mptt.models.</code><code class="descname">TreeManyToManyField</code><span class="sig-paren">(</span><em>to</em>, <em>db_constraint=True</em>, <em>swappable=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManyToManyField" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="mptt.models.TreeManyToManyField.formfield">
<code class="descname">formfield</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManyToManyField.formfield" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mptt.models.TreeManager">
<em class="property">class </em><code class="descclassname">mptt.models.</code><code class="descname">TreeManager</code><a class="headerlink" href="#mptt.models.TreeManager" title="Permalink to this definition">¶</a></dt>
<dd><p>A manager for working with trees of objects.</p>
<dl class="method">
<dt id="mptt.models.TreeManager.add_related_count">
<code class="descname">add_related_count</code><span class="sig-paren">(</span><em>queryset</em>, <em>rel_model</em>, <em>rel_field</em>, <em>count_attr</em>, <em>cumulative=False</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.add_related_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a related item count to a given <code class="docutils literal"><span class="pre">QuerySet</span></code> using its
<code class="docutils literal"><span class="pre">extra</span></code> method, for a <code class="docutils literal"><span class="pre">Model</span></code> class which has a relation to
this <code class="docutils literal"><span class="pre">Manager</span></code>&#8216;s <code class="docutils literal"><span class="pre">Model</span></code> class.</p>
<p>Arguments:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">rel_model</span></code></dt>
<dd>A <code class="docutils literal"><span class="pre">Model</span></code> class which has a relation to this <cite>Manager`</cite>&#8216;s
<code class="docutils literal"><span class="pre">Model</span></code> class.</dd>
<dt><code class="docutils literal"><span class="pre">rel_field</span></code></dt>
<dd>The name of the field in <code class="docutils literal"><span class="pre">rel_model</span></code> which holds the
relation.</dd>
<dt><code class="docutils literal"><span class="pre">count_attr</span></code></dt>
<dd>The name of an attribute which should be added to each item in
this <code class="docutils literal"><span class="pre">QuerySet</span></code>, containing a count of how many instances
of <code class="docutils literal"><span class="pre">rel_model</span></code> are related to it through <code class="docutils literal"><span class="pre">rel_field</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">cumulative</span></code></dt>
<dd>If <code class="docutils literal"><span class="pre">True</span></code>, the count will be for each item and all of its
descendants, otherwise it will be for each item itself.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.contribute_to_class">
<code class="descname">contribute_to_class</code><span class="sig-paren">(</span><em>model</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.contribute_to_class" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.delay_mptt_updates">
<code class="descname">delay_mptt_updates</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.delay_mptt_updates" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager. Delays mptt updates until the end of a block of bulk
processing.</p>
<p>NOTE that this context manager causes inconsistencies! MPTT model
methods are not guaranteed to return the correct results until the end
of the context block.</p>
<dl class="docutils">
<dt>When to use this method:</dt>
<dd><p class="first">If used correctly, this method can be used to speed up bulk
updates.  This is best for updates in a localised area of the db
table, especially if all the updates happen in a single tree and
the rest of the forest is left untouched.  No subsequent rebuild is
necessary.</p>
<p><code class="docutils literal"><span class="pre">delay_mptt_updates</span></code> does a partial rebuild of the modified trees
(not the whole table).  If used indiscriminately, this can actually
be much slower than just letting the updates occur when they&#8217;re
required.</p>
<p>The worst case occurs when every tree in the table is modified just
once.  That results in a full rebuild of the table, which can be
<em>very</em> slow.</p>
<p class="last">If your updates will modify most of the trees in the table (not a
small number of trees), you should consider using
<code class="docutils literal"><span class="pre">TreeManager.disable_mptt_updates</span></code>, as it does much fewer
queries.</p>
</dd>
<dt>Transactions:</dt>
<dd>This doesn&#8217;t enforce any transactional behavior.  You should wrap
this in a transaction to ensure database consistency.</dd>
<dt>Exceptions:</dt>
<dd>If an exception occurs before the processing of the block, delayed
updates will not be applied.</dd>
</dl>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>with transaction.atomic():
    with MyNode.objects.delay_mptt_updates():
        ## bulk updates.
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.disable_mptt_updates">
<code class="descname">disable_mptt_updates</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.disable_mptt_updates" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager. Disables mptt updates.</p>
<p>NOTE that this context manager causes inconsistencies! MPTT model
methods are not guaranteed to return the correct results.</p>
<dl class="docutils">
<dt>When to use this method:</dt>
<dd><p class="first">If used correctly, this method can be used to speed up bulk
updates.</p>
<p>This doesn&#8217;t do anything clever. It <em>will</em> mess up your tree.  You
should follow this method with a call to <code class="docutils literal"><span class="pre">TreeManager.rebuild()</span></code>
to ensure your tree stays sane, and you should wrap both calls in a
transaction.</p>
<p>This is best for updates that span a large part of the table.  If
you are doing localised changes (one tree, or a few trees) consider
using <code class="docutils literal"><span class="pre">delay_mptt_updates</span></code>.</p>
<p class="last">If you are making only minor changes to your tree, just let the
updates happen.</p>
</dd>
<dt>Transactions:</dt>
<dd>This doesn&#8217;t enforce any transactional behavior.  You should wrap
this in a transaction to ensure database consistency.</dd>
</dl>
<p>If updates are already disabled on the model, this is a noop.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre>with transaction.atomic():
    with MyNode.objects.disable_mptt_updates():
        ## bulk updates.
    MyNode.objects.rebuild()
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.get_queryset">
<code class="descname">get_queryset</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.get_queryset" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensures that this manager always returns nodes in tree order.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.get_queryset_ancestors">
<code class="descname">get_queryset_ancestors</code><span class="sig-paren">(</span><em>queryset</em>, <em>include_self=False</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.get_queryset_ancestors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a queryset containing the ancestors
of all nodes in the given queryset.</p>
<p>If <code class="docutils literal"><span class="pre">include_self=True</span></code>, nodes in <code class="docutils literal"><span class="pre">queryset</span></code> will also
be included in the result.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.get_queryset_descendants">
<code class="descname">get_queryset_descendants</code><span class="sig-paren">(</span><em>queryset</em>, <em>include_self=False</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.get_queryset_descendants" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a queryset containing the descendants of all nodes in the
given queryset.</p>
<p>If <code class="docutils literal"><span class="pre">include_self=True</span></code>, nodes in <code class="docutils literal"><span class="pre">queryset</span></code> will also
be included in the result.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.insert_node">
<code class="descname">insert_node</code><span class="sig-paren">(</span><em>node</em>, <em>target</em>, <em>position=u'last-child'</em>, <em>save=False</em>, <em>allow_existing_pk=False</em>, <em>refresh_target=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.insert_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up the tree state for <code class="docutils literal"><span class="pre">node</span></code> (which has not yet been
inserted into in the database) so it will be positioned relative
to a given <code class="docutils literal"><span class="pre">target</span></code> node as specified by <code class="docutils literal"><span class="pre">position</span></code> (when
appropriate) it is inserted, with any neccessary space already
having been made for it.</p>
<p>A <code class="docutils literal"><span class="pre">target</span></code> of <code class="docutils literal"><span class="pre">None</span></code> indicates that <code class="docutils literal"><span class="pre">node</span></code> should be
the last root node.</p>
<p>If <code class="docutils literal"><span class="pre">save</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, <code class="docutils literal"><span class="pre">node</span></code>&#8216;s <code class="docutils literal"><span class="pre">save()</span></code> method will be
called before it is returned.</p>
<p>NOTE: This is a low-level method; it does NOT respect
<code class="docutils literal"><span class="pre">MPTTMeta.order_insertion_by</span></code>.  In most cases you should just
set the node&#8217;s parent and let mptt call this during save.</p>
</dd></dl>

<dl class="attribute">
<dt id="mptt.models.TreeManager.left_attr">
<code class="descname">left_attr</code><a class="headerlink" href="#mptt.models.TreeManager.left_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="mptt.models.TreeManager.level_attr">
<code class="descname">level_attr</code><a class="headerlink" href="#mptt.models.TreeManager.level_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.move_node">
<code class="descname">move_node</code><span class="sig-paren">(</span><em>node</em>, <em>target</em>, <em>position=u'last-child'</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.move_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves <code class="docutils literal"><span class="pre">node</span></code> relative to a given <code class="docutils literal"><span class="pre">target</span></code> node as specified
by <code class="docutils literal"><span class="pre">position</span></code> (when appropriate), by examining both nodes and
calling the appropriate method to perform the move.</p>
<p>A <code class="docutils literal"><span class="pre">target</span></code> of <code class="docutils literal"><span class="pre">None</span></code> indicates that <code class="docutils literal"><span class="pre">node</span></code> should be
turned into a root node.</p>
<p>Valid values for <code class="docutils literal"><span class="pre">position</span></code> are <code class="docutils literal"><span class="pre">'first-child'</span></code>,
<code class="docutils literal"><span class="pre">'last-child'</span></code>, <code class="docutils literal"><span class="pre">'left'</span></code> or <code class="docutils literal"><span class="pre">'right'</span></code>.</p>
<p><code class="docutils literal"><span class="pre">node</span></code> will be modified to reflect its new tree state in the
database.</p>
<p>This method explicitly checks for <code class="docutils literal"><span class="pre">node</span></code> being made a sibling
of a root node, as this is a special case due to our use of tree
ids to order root nodes.</p>
<p>NOTE: This is a low-level method; it does NOT respect
<code class="docutils literal"><span class="pre">MPTTMeta.order_insertion_by</span></code>.  In most cases you should just
move the node yourself by setting node.parent.</p>
</dd></dl>

<dl class="attribute">
<dt id="mptt.models.TreeManager.parent_attr">
<code class="descname">parent_attr</code><a class="headerlink" href="#mptt.models.TreeManager.parent_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.partial_rebuild">
<code class="descname">partial_rebuild</code><span class="sig-paren">(</span><em>tree_id</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.partial_rebuild" title="Permalink to this definition">¶</a></dt>
<dd><p>Partially rebuilds a tree i.e. It rebuilds only the tree with given
<code class="docutils literal"><span class="pre">tree_id</span></code> in database table using <code class="docutils literal"><span class="pre">parent</span></code> link.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.rebuild">
<code class="descname">rebuild</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.rebuild" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebuilds all trees in the database table using <cite>parent</cite> link.</p>
</dd></dl>

<dl class="attribute">
<dt id="mptt.models.TreeManager.right_attr">
<code class="descname">right_attr</code><a class="headerlink" href="#mptt.models.TreeManager.right_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.root_node">
<code class="descname">root_node</code><span class="sig-paren">(</span><em>tree_id</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.root_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the root node of the tree with the given id.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.TreeManager.root_nodes">
<code class="descname">root_nodes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.TreeManager.root_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="docutils literal"><span class="pre">QuerySet</span></code> containing root nodes.</p>
</dd></dl>

<dl class="attribute">
<dt id="mptt.models.TreeManager.tree_id_attr">
<code class="descname">tree_id_attr</code><a class="headerlink" href="#mptt.models.TreeManager.tree_id_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mptt.models.MPTTOptions">
<em class="property">class </em><code class="descclassname">mptt.models.</code><code class="descname">MPTTOptions</code><span class="sig-paren">(</span><em>opts=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Options class for MPTT models. Use this as an inner class called <code class="docutils literal"><span class="pre">MPTTMeta</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">MPTTModel</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">MPTTMeta</span><span class="p">:</span>
        <span class="n">order_insertion_by</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span>
        <span class="n">parent_attr</span> <span class="o">=</span> <span class="s">&#39;myparent&#39;</span>
</pre></div>
</div>
<dl class="method">
<dt id="mptt.models.MPTTOptions.get_ordered_insertion_target">
<code class="descname">get_ordered_insertion_target</code><span class="sig-paren">(</span><em>node</em>, <em>parent</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTOptions.get_ordered_insertion_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to retrieve a suitable right sibling for <code class="docutils literal"><span class="pre">node</span></code>
underneath <code class="docutils literal"><span class="pre">parent</span></code> (which may be <code class="docutils literal"><span class="pre">None</span></code> in the case of root
nodes) so that ordering by the fields specified by the node&#8217;s class&#8217;
<code class="docutils literal"><span class="pre">order_insertion_by</span></code> option is maintained.</p>
<p>Returns <code class="docutils literal"><span class="pre">None</span></code> if no suitable sibling can be found.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTOptions.get_raw_field_value">
<code class="descname">get_raw_field_value</code><span class="sig-paren">(</span><em>instance</em>, <em>field_name</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTOptions.get_raw_field_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of the given fieldname for the instance.
This is not the same as getattr().
This function will return IDs for foreignkeys etc, rather than doing
a database query.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTOptions.insertion_target_filters">
<code class="descname">insertion_target_filters</code><span class="sig-paren">(</span><em>instance</em>, <em>order_insertion_by</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTOptions.insertion_target_filters" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a filter which matches suitable right siblings for <code class="docutils literal"><span class="pre">node</span></code>,
where insertion should maintain ordering according to the list of
fields in <code class="docutils literal"><span class="pre">order_insertion_by</span></code>.</p>
<p>For example, given an <code class="docutils literal"><span class="pre">order_insertion_by</span></code> of
<code class="docutils literal"><span class="pre">['field1',</span> <span class="pre">'field2',</span> <span class="pre">'field3']</span></code>, the resulting filter should
correspond to the following SQL:</p>
<div class="highlight-python"><div class="highlight"><pre>field1 &gt; %s
OR (field1 = %s AND field2 &gt; %s)
OR (field1 = %s AND field2 = %s AND field3 &gt; %s)
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="mptt.models.MPTTOptions.left_attr">
<code class="descname">left_attr</code><em class="property"> = u'lft'</em><a class="headerlink" href="#mptt.models.MPTTOptions.left_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="mptt.models.MPTTOptions.level_attr">
<code class="descname">level_attr</code><em class="property"> = u'level'</em><a class="headerlink" href="#mptt.models.MPTTOptions.level_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="mptt.models.MPTTOptions.order_insertion_by">
<code class="descname">order_insertion_by</code><em class="property"> = []</em><a class="headerlink" href="#mptt.models.MPTTOptions.order_insertion_by" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="mptt.models.MPTTOptions.parent_attr">
<code class="descname">parent_attr</code><em class="property"> = u'parent'</em><a class="headerlink" href="#mptt.models.MPTTOptions.parent_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="mptt.models.MPTTOptions.right_attr">
<code class="descname">right_attr</code><em class="property"> = u'rght'</em><a class="headerlink" href="#mptt.models.MPTTOptions.right_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTOptions.set_raw_field_value">
<code class="descname">set_raw_field_value</code><span class="sig-paren">(</span><em>instance</em>, <em>field_name</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTOptions.set_raw_field_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of the given fieldname for the instance.
This is not the same as setattr().
This function requires an ID for a foreignkey (etc) rather than an instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="mptt.models.MPTTOptions.tree_id_attr">
<code class="descname">tree_id_attr</code><em class="property"> = u'tree_id'</em><a class="headerlink" href="#mptt.models.MPTTOptions.tree_id_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTOptions.update_mptt_cached_fields">
<code class="descname">update_mptt_cached_fields</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTOptions.update_mptt_cached_fields" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Caches (in an instance._mptt_cached_fields dict) the original values of:</dt>
<dd><ul class="first last simple">
<li>parent pk</li>
<li>fields specified in order_insertion_by</li>
</ul>
</dd>
</dl>
<p>These are used in save() to determine if the relevant fields have changed,
so that the MPTT fields need to be updated.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mptt.models.MPTTModelBase">
<em class="property">class </em><code class="descclassname">mptt.models.</code><code class="descname">MPTTModelBase</code><a class="headerlink" href="#mptt.models.MPTTModelBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Metaclass for MPTT models</p>
<dl class="classmethod">
<dt id="mptt.models.MPTTModelBase.register">
<em class="property">classmethod </em><code class="descname">register</code><span class="sig-paren">(</span><em>meta</em>, <em>cls</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModelBase.register" title="Permalink to this definition">¶</a></dt>
<dd><p>For the weird cases when you need to add tree-ness to an <em>existing</em>
class. For other cases you should subclass MPTTModel instead of calling this.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mptt.models.MPTTModel">
<em class="property">class </em><code class="descclassname">mptt.models.</code><code class="descname">MPTTModel</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for tree models.</p>
<dl class="class">
<dt id="mptt.models.MPTTModel.Meta">
<em class="property">class </em><code class="descname">Meta</code><a class="headerlink" href="#mptt.models.MPTTModel.Meta" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="mptt.models.MPTTModel.Meta.abstract">
<code class="descname">abstract</code><em class="property"> = False</em><a class="headerlink" href="#mptt.models.MPTTModel.Meta.abstract" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.delete">
<code class="descclassname">MPTTModel.</code><code class="descname">delete</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Calling <code class="docutils literal"><span class="pre">delete</span></code> on a node will delete it as well as its full
subtree, as opposed to reattaching all the subnodes to its parent node.</p>
<p>There are no argument specific to a MPTT model, all the arguments will
be passed directly to the django&#8217;s <code class="docutils literal"><span class="pre">Model.delete</span></code>.</p>
<p><code class="docutils literal"><span class="pre">delete</span></code> will not return anything.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_ancestors">
<code class="descclassname">MPTTModel.</code><code class="descname">get_ancestors</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_ancestors" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="docutils literal"><span class="pre">QuerySet</span></code> containing the ancestors of this model
instance.</p>
<p>This defaults to being in descending order (root ancestor first,
immediate parent last); passing <code class="docutils literal"><span class="pre">True</span></code> for the <code class="docutils literal"><span class="pre">ascending</span></code>
argument will reverse the ordering (immediate parent first, root
ancestor last).</p>
<p>If <code class="docutils literal"><span class="pre">include_self</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, the <code class="docutils literal"><span class="pre">QuerySet</span></code> will also
include this model instance.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_children">
<code class="descclassname">MPTTModel.</code><code class="descname">get_children</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_children" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <code class="docutils literal"><span class="pre">QuerySet</span></code> containing the immediate children of this
model instance, in tree order.</p>
<p>The benefit of using this method over the reverse relation
provided by the ORM to the instance&#8217;s children is that a
database query can be avoided in the case where the instance is
a leaf node (it has no children).</p>
<p>If called from a template where the tree has been walked by the
<code class="docutils literal"><span class="pre">cache_tree_children</span></code> filter, no database query is required.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_descendant_count">
<code class="descclassname">MPTTModel.</code><code class="descname">get_descendant_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_descendant_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of descendants this model instance has.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_descendants">
<code class="descclassname">MPTTModel.</code><code class="descname">get_descendants</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_descendants" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="docutils literal"><span class="pre">QuerySet</span></code> containing descendants of this model
instance, in tree order.</p>
<p>If <code class="docutils literal"><span class="pre">include_self</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, the <code class="docutils literal"><span class="pre">QuerySet</span></code> will also
include this model instance.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_family">
<code class="descclassname">MPTTModel.</code><code class="descname">get_family</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_family" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <code class="docutils literal"><span class="pre">QuerySet</span></code> containing the ancestors, the model itself
and the descendants, in tree order.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_leafnodes">
<code class="descclassname">MPTTModel.</code><code class="descname">get_leafnodes</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_leafnodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="docutils literal"><span class="pre">QuerySet</span></code> containing leafnodes of this model
instance, in tree order.</p>
<p>If <code class="docutils literal"><span class="pre">include_self</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, the <code class="docutils literal"><span class="pre">QuerySet</span></code> will also
include this model instance (if it is a leaf node)</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_level">
<code class="descclassname">MPTTModel.</code><code class="descname">get_level</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the level of this node (distance from root)</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_next_sibling">
<code class="descclassname">MPTTModel.</code><code class="descname">get_next_sibling</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_next_sibling" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns this model instance&#8217;s next sibling in the tree, or
<code class="docutils literal"><span class="pre">None</span></code> if it doesn&#8217;t have a next sibling.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_previous_sibling">
<code class="descclassname">MPTTModel.</code><code class="descname">get_previous_sibling</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_previous_sibling" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns this model instance&#8217;s previous sibling in the tree, or
<code class="docutils literal"><span class="pre">None</span></code> if it doesn&#8217;t have a previous sibling.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_root">
<code class="descclassname">MPTTModel.</code><code class="descname">get_root</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the root node of this model instance&#8217;s tree.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.get_siblings">
<code class="descclassname">MPTTModel.</code><code class="descname">get_siblings</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.get_siblings" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="docutils literal"><span class="pre">QuerySet</span></code> containing siblings of this model
instance. Root nodes are considered to be siblings of other root
nodes.</p>
<p>If <code class="docutils literal"><span class="pre">include_self</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, the <code class="docutils literal"><span class="pre">QuerySet</span></code> will also
include this model instance.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.insert_at">
<code class="descclassname">MPTTModel.</code><code class="descname">insert_at</code><span class="sig-paren">(</span><em>target</em>, <em>position=u'first-child'</em>, <em>save=False</em>, <em>allow_existing_pk=False</em>, <em>refresh_target=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.insert_at" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method for calling <code class="docutils literal"><span class="pre">TreeManager.insert_node</span></code> with this
model instance.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.is_ancestor_of">
<code class="descclassname">MPTTModel.</code><code class="descname">is_ancestor_of</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.is_ancestor_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> if this model is an ancestor of the given node,
<code class="docutils literal"><span class="pre">False</span></code> otherwise.
If include_self is True, also returns True if the two nodes are the same node.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.is_child_node">
<code class="descclassname">MPTTModel.</code><code class="descname">is_child_node</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.is_child_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> if this model instance is a child node, <code class="docutils literal"><span class="pre">False</span></code>
otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.is_descendant_of">
<code class="descclassname">MPTTModel.</code><code class="descname">is_descendant_of</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.is_descendant_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> if this model is a descendant of the given node,
<code class="docutils literal"><span class="pre">False</span></code> otherwise.
If include_self is True, also returns True if the two nodes are the same node.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.is_leaf_node">
<code class="descclassname">MPTTModel.</code><code class="descname">is_leaf_node</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.is_leaf_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> if this model instance is a leaf node (it has no
children), <code class="docutils literal"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.is_root_node">
<code class="descclassname">MPTTModel.</code><code class="descname">is_root_node</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.is_root_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> if this model instance is a root node,
<code class="docutils literal"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.move_to">
<code class="descclassname">MPTTModel.</code><code class="descname">move_to</code><span class="sig-paren">(</span><em>target</em>, <em>position=u'first-child'</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.move_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method for calling <code class="docutils literal"><span class="pre">TreeManager.move_node</span></code> with this
model instance.</p>
<p>NOTE: This is a low-level method; it does NOT respect <code class="docutils literal"><span class="pre">MPTTMeta.order_insertion_by</span></code>.
In most cases you should just move the node yourself by setting node.parent.</p>
</dd></dl>

<dl class="method">
<dt id="mptt.models.MPTTModel.save">
<code class="descclassname">MPTTModel.</code><code class="descname">save</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mptt.models.MPTTModel.save" title="Permalink to this definition">¶</a></dt>
<dd><p>If this is a new node, sets tree fields up before it is inserted
into the database, making room in the tree structure as neccessary,
defaulting to making the new node the last child of its parent.</p>
<p>It the node&#8217;s left and right edge indicators already been set, we
take this as indication that the node has already been set up for
insertion, so its tree fields are left untouched.</p>
<p>If this is an existing node and its parent has been changed,
performs reparenting in the tree structure, defaulting to making the
node the last child of its new parent.</p>
<p>In either case, if the node&#8217;s class has its <code class="docutils literal"><span class="pre">order_insertion_by</span></code>
tree option set, the node will be inserted or moved to the
appropriate position to maintain ordering by the specified field.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="mptt.managers.html"
                        title="previous chapter"><code class="docutils literal"><span class="pre">mptt.managers</span></code></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mptt.querysets.html"
                        title="next chapter"><code class="docutils literal"><span class="pre">mptt.querysets</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/mptt.models.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mptt.querysets.html" title="mptt.querysets"
             >next</a> |</li>
        <li class="right" >
          <a href="mptt.managers.html" title="mptt.managers"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">django-mptt 0.8.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="autogenerated.html" >Autogenerated documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="mptt.html" ><code class="docutils literal"><span class="pre">mptt</span></code></a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2007 - 2013, Craig de Stigter, Jonathan Buchanan and others.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>